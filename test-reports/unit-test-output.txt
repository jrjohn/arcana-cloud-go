	github.com/jrjohn/arcana-cloud-go/api/proto/pb		coverage: 0.0% of statements
EMPTY api/proto/pb (coverage: 0.0% of statements)
	github.com/jrjohn/arcana-cloud-go/cmd/server		coverage: 0.0% of statements
	github.com/jrjohn/arcana-cloud-go/cmd/worker		coverage: 0.0% of statements
	github.com/jrjohn/arcana-cloud-go/internal/controller/grpc/service		coverage: 0.0% of statements
	github.com/jrjohn/arcana-cloud-go/internal/controller/grpc/repository		coverage: 0.0% of statements
EMPTY cmd/server (coverage: 0.0% of statements)
EMPTY cmd/worker (coverage: 0.0% of statements)
EMPTY internal/controller/grpc/service (coverage: 0.0% of statements)
EMPTY internal/controller/grpc/repository (coverage: 0.0% of statements)
PASS internal/config.TestDeploymentMode_Constants/monolithic (0.00s)
PASS internal/config.TestDeploymentMode_Constants/layered (0.00s)
PASS internal/config.TestDeploymentMode_Constants/kubernetes (0.00s)
PASS internal/config.TestDeploymentMode_Constants (0.00s)
PASS internal/config.TestDeploymentLayer_Constants/controller (0.00s)
PASS internal/config.TestDeploymentLayer_Constants/service (0.00s)
PASS internal/config.TestDeploymentLayer_Constants/repository (0.00s)
PASS internal/config.TestDeploymentLayer_Constants/all (0.00s)
PASS internal/config.TestDeploymentLayer_Constants (0.00s)
PASS internal/config.TestCommunicationProtocol_Constants/http (0.00s)
PASS internal/config.TestCommunicationProtocol_Constants/grpc (0.00s)
PASS internal/config.TestCommunicationProtocol_Constants (0.00s)
PASS internal/config.TestConfig_Validate/valid_config (0.00s)
PASS internal/config.TestConfig_Validate/missing_JWT_secret (0.00s)
PASS internal/config.TestConfig_Validate/missing_database_name (0.00s)
PASS internal/config.TestConfig_Validate (0.00s)
PASS internal/config.TestDatabaseConfig_DSN/mysql_DSN (0.00s)
PASS internal/config.TestDatabaseConfig_DSN/postgres_DSN (0.00s)
PASS internal/config.TestDatabaseConfig_DSN/unknown_driver_returns_empty (0.00s)
PASS internal/config.TestDatabaseConfig_DSN (0.00s)
PASS internal/controller/grpc.TestNewServer (0.00s)
PASS internal/config.TestDeploymentConfig_IsControllerLayer/LayerAll_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsControllerLayer/LayerController_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsControllerLayer/LayerService_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsControllerLayer/LayerRepository_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsControllerLayer (0.00s)
PASS internal/config.TestDeploymentConfig_IsServiceLayer/LayerAll_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsServiceLayer/LayerService_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsServiceLayer/LayerController_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsServiceLayer/LayerRepository_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsServiceLayer (0.00s)
PASS internal/config.TestDeploymentConfig_IsRepositoryLayer/LayerAll_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsRepositoryLayer/LayerRepository_returns_true (0.00s)
PASS internal/config.TestDeploymentConfig_IsRepositoryLayer/LayerController_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsRepositoryLayer/LayerService_returns_false (0.00s)
PASS internal/config.TestDeploymentConfig_IsRepositoryLayer (0.00s)
PASS internal/config.TestDeploymentConfig_IsGRPC/gRPC_protocol (0.00s)
PASS internal/config.TestDeploymentConfig_IsGRPC/HTTP_protocol (0.00s)
PASS internal/config.TestDeploymentConfig_IsGRPC (0.00s)
PASS internal/controller/grpc.TestNewServer_TLSEnabled_InvalidFiles (0.01s)
PASS internal/controller/grpc.TestServer_GetServer (0.00s)
PASS internal/controller/grpc.TestServer_Stop (0.00s)
PASS internal/controller/grpc.TestLoggingInterceptor/success (0.00s)
PASS internal/controller/grpc.TestLoggingInterceptor/error (0.00s)
PASS internal/controller/grpc.TestLoggingInterceptor (0.00s)
PASS internal/controller/grpc.TestRecoveryInterceptor/success (0.00s)
PASS internal/controller/grpc.TestRecoveryInterceptor/panic_recovery (0.00s)
PASS internal/controller/grpc.TestRecoveryInterceptor (0.00s)
coverage: 75.0% of statements
PASS internal/config.TestLoad_WithEnvVars (0.01s)
PASS internal/config.TestConfig_Structs (0.00s)
PASS internal/config.TestConfig_FullStruct (0.00s)
coverage: 76.3% of statements
PASS internal/controller/grpc (coverage: 75.0% of statements)
PASS internal/config (coverage: 76.3% of statements)
PASS internal/controller/http.TestNewAuthController (0.00s)
PASS internal/controller/http.TestAuthController_Register_Success (0.00s)
PASS internal/controller/http.TestAuthController_Register_ValidationError (0.00s)
PASS internal/controller/http.TestAuthController_Register_UserExists (0.00s)
PASS internal/controller/http.TestAuthController_Register_InternalError (0.00s)
PASS internal/controller/http.TestAuthController_Login_Success (0.00s)
PASS internal/controller/http.TestAuthController_Login_InvalidCredentials (0.00s)
PASS internal/controller/http.TestAuthController_Login_UserInactive (0.00s)
PASS internal/controller/http.TestAuthController_Login_ValidationError (0.00s)
PASS internal/controller/http.TestAuthController_Login_InternalError (0.00s)
PASS internal/controller/http.TestAuthController_RefreshToken_Success (0.00s)
PASS internal/controller/http.TestAuthController_RefreshToken_InvalidToken (0.00s)
PASS internal/controller/http.TestAuthController_RefreshToken_ValidationError (0.00s)
PASS internal/controller/http.TestAuthController_RefreshToken_InternalError (0.00s)
PASS internal/controller/http.TestAuthController_Logout (0.00s)
PASS internal/controller/http.TestAuthController_Logout_NoToken (0.00s)
PASS internal/controller/http.TestAuthController_LogoutAll (0.00s)
PASS internal/controller/http.TestAuthController_RegisterRoutes (0.00s)
PASS internal/controller/http.TestNewUserController (0.00s)
PASS internal/controller/http.TestUserController_List_Success (0.00s)
PASS internal/controller/http.TestUserController_List_Error (0.00s)
PASS internal/controller/http.TestUserController_GetCurrentUser_Success (0.00s)
PASS internal/controller/http.TestUserController_GetCurrentUser_NotAuthenticated (0.00s)
PASS internal/controller/http.TestUserController_GetCurrentUser_NotFound (0.00s)
PASS internal/controller/http.TestUserController_GetCurrentUser_InternalError (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_Success (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_NotAuthenticated (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_ValidationError (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_NotFound (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_EmailConflict (0.00s)
PASS internal/controller/http.TestUserController_UpdateCurrentUser_InternalError (0.00s)
PASS internal/controller/http.TestUserController_ChangePassword_Success (0.00s)
PASS internal/controller/http.TestUserController_ChangePassword_NotAuthenticated (0.00s)
PASS internal/controller/http.TestUserController_ChangePassword_InvalidCredentials (0.00s)
PASS internal/controller/http.TestUserController_GetByID_Success (0.00s)
PASS internal/controller/http.TestUserController_GetByID_InvalidID (0.00s)
PASS internal/controller/http.TestUserController_GetByUsername_Success (0.00s)
PASS internal/controller/http.TestUserController_Delete_Success (0.00s)
PASS internal/controller/http.TestUserController_Delete_InvalidID (0.00s)
PASS internal/controller/http.TestUserController_Delete_Error (0.00s)
PASS internal/controller/http.TestNewPluginController (0.00s)
PASS internal/controller/http.TestPluginController_List_Success (0.00s)
PASS internal/controller/http.TestPluginController_GetByKey_Success (0.00s)
PASS internal/controller/http.TestPluginController_GetByKey_NotFound (0.00s)
PASS internal/controller/http.TestPluginController_Install_Success (0.00s)
PASS internal/controller/http.TestPluginController_Install_NoFile (0.00s)
PASS internal/controller/http.TestPluginController_Install_MissingFields (0.00s)
PASS internal/controller/http.TestPluginController_Enable_Success (0.00s)
PASS internal/controller/http.TestPluginController_Enable_InvalidState (0.00s)
PASS internal/controller/http.TestPluginController_Disable_Success (0.00s)
PASS internal/controller/http.TestPluginController_Uninstall_Success (0.00s)
PASS internal/controller/http.TestPluginController_GetHealth_Success (0.00s)
PASS internal/controller/http.TestPluginController_GetReadiness (0.00s)
PASS internal/controller/http.TestPluginController_GetLiveness (0.00s)
PASS internal/controller/http.TestNewJobController (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_Success (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_WithDelay (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_WithScheduledAt (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_InvalidScheduledAt (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_InvalidPayload (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities/low (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities/normal (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities/high (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities/critical (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities/unknown (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_AllPriorities (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_WithTags (0.00s)
PASS internal/controller/http.TestJobController_EnqueueJob_WithUniqueKey (0.00s)
PASS internal/controller/http.TestJobController_GetJob_Success (0.00s)
PASS internal/controller/http.TestJobController_GetJob_NotFound (0.00s)
PASS internal/controller/http.TestJobController_CancelJob_Success (0.00s)
PASS internal/controller/http.TestJobController_RetryJob_Success (0.00s)
PASS internal/controller/http.TestJobController_GetQueueStats_Success (0.00s)
PASS internal/controller/http.TestJobController_GetDashboard (0.00s)
PASS internal/controller/http.TestJobController_GetDLQJobs_Success (0.00s)
PASS internal/controller/http.TestJobController_GetDLQJobs_InvalidLimit (0.00s)
PASS internal/controller/http.TestJobController_RetryDLQJob_Success (0.00s)
PASS internal/controller/http.TestJobController_PurgeDLQ_Success (0.00s)
PASS internal/controller/http.TestJobController_GetScheduledJobs_NoScheduler (0.00s)
PASS internal/controller/http.TestJobController_RegisterRoutes (0.00s)
PASS internal/controller/http.TestUserController_RegisterRoutes (0.00s)
PASS internal/controller/http.TestPluginController_RegisterRoutes (0.00s)
coverage: 68.0% of statements
# github.com/jrjohn/arcana-cloud-go/internal/di.test
/usr/local/go/pkg/tool/linux_arm64/link: running gcc failed: exit status 1
/usr/bin/gcc -s -Wl,-z,now -Wl,-z,nocopyreloc -fuse-ld=gold -o $WORK/b569/di.test -rdynamic /tmp/go-link-1414236909/go.o /tmp/go-link-1414236909/000000.o /tmp/go-link-1414236909/000001.o /tmp/go-link-1414236909/000002.o /tmp/go-link-1414236909/000003.o /tmp/go-link-1414236909/000004.o /tmp/go-link-1414236909/000005.o /tmp/go-link-1414236909/000006.o /tmp/go-link-1414236909/000007.o /tmp/go-link-1414236909/000008.o /tmp/go-link-1414236909/000009.o /tmp/go-link-1414236909/000010.o /tmp/go-link-1414236909/000011.o /tmp/go-link-1414236909/000012.o /tmp/go-link-1414236909/000013.o /tmp/go-link-1414236909/000014.o /tmp/go-link-1414236909/000015.o /tmp/go-link-1414236909/000016.o /tmp/go-link-1414236909/000017.o /tmp/go-link-1414236909/000018.o /tmp/go-link-1414236909/000019.o /tmp/go-link-1414236909/000020.o /tmp/go-link-1414236909/000021.o /tmp/go-link-1414236909/000022.o /tmp/go-link-1414236909/000023.o /tmp/go-link-1414236909/000024.o /tmp/go-link-1414236909/000025.o /tmp/go-link-1414236909/000026.o /tmp/go-link-1414236909/000027.o -O2 -g -lresolv -O2 -g -ldl -O2 -g -lpthread -O2 -g -O2 -g
collect2: fatal error: cannot find 'ld'
compilation terminated.

FAIL internal/di
PASS internal/domain/dao.TestNewPageResult (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages/exact_division (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages/with_remainder (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages/single_page (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages/empty (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages/zero_size (0.00s)
PASS internal/domain/dao.TestPageResult_TotalPages (0.00s)
PASS internal/domain/dao.TestPageResult_HasNext/has_next_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasNext/last_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasNext/only_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasNext/middle_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasNext (0.00s)
PASS internal/domain/dao.TestPageResult_HasPrev/first_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasPrev/second_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasPrev/third_page (0.00s)
PASS internal/domain/dao.TestPageResult_HasPrev (0.00s)
PASS internal/domain/dao.TestQueryOption (0.00s)
coverage: 100.0% of statements
PASS internal/controller/http (coverage: 68.0% of statements)
PASS internal/domain/dao (coverage: 100.0% of statements)
EMPTY internal/domain/repository
	github.com/jrjohn/arcana-cloud-go/internal/domain/dao/mongo		coverage: 0.0% of statements
	github.com/jrjohn/arcana-cloud-go/internal/domain/repository/grpc		coverage: 0.0% of statements
EMPTY internal/dto/request
EMPTY internal/domain/dao/mongo (coverage: 0.0% of statements)
EMPTY internal/domain/repository/grpc (coverage: 0.0% of statements)
PASS internal/domain/dao/mongo/document.TestUserDocument/CollectionName (0.00s)
PASS internal/domain/dao/mongo/document.TestUserDocument/IsDeleted_false (0.00s)
PASS internal/domain/dao/mongo/document.TestUserDocument/IsDeleted_true (0.00s)
PASS internal/domain/dao/mongo/document.TestUserDocument (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/CollectionName (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsExpired_false (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsExpired_true (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsValid_true (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsValid_false_-_revoked (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsValid_false_-_expired (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument/IsDeleted (0.00s)
PASS internal/domain/dao/mongo/document.TestRefreshTokenDocument (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginDocument/CollectionName (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginDocument/IsEnabled_true (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginDocument/IsEnabled_false (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginDocument/IsDeleted (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginDocument (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginExtensionDocument/CollectionName (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginExtensionDocument/IsDeleted (0.00s)
PASS internal/domain/dao/mongo/document.TestPluginExtensionDocument (0.00s)
coverage: 100.0% of statements
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocument/nil_user (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocument/valid_user (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocument/user_with_deleted_at (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocument (0.00s)
PASS internal/domain/entity.TestUserRole_Constants/USER_role (0.00s)
PASS internal/domain/entity.TestUserRole_Constants/ADMIN_role (0.00s)
PASS internal/domain/entity.TestUserRole_Constants (0.00s)
PASS internal/domain/entity.TestUser_TableName (0.00s)
PASS internal/domain/entity.TestUser_Struct (0.00s)
PASS internal/domain/entity.TestRefreshToken_TableName (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntity/nil_document (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntity/valid_document (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntity/document_with_deleted_at (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntity (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntities/nil_slice (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntities/valid_slice (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToEntities (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsExpired/not_expired (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsExpired/expired (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsExpired/expires_now (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsExpired (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsValid/valid_token (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsValid/revoked_token (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsValid/expired_token (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsValid/expired_and_revoked (0.00s)
PASS internal/domain/entity.TestRefreshToken_IsValid (0.00s)
PASS internal/domain/entity.TestRefreshToken_Struct (0.00s)
PASS internal/domain/entity.TestUser_AdminRole (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocuments/nil_slice (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocuments/valid_slice (0.00s)
PASS internal/domain/dao/mongo/mapper.TestUserMapper_ToDocuments (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToDocument_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToDocument_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToEntity_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToEntity_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToEntities (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper/ToDocuments (0.00s)
PASS internal/domain/dao/mongo/mapper.TestRefreshTokenMapper (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToDocument_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToDocument_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToEntity_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToEntity_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToEntities (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper/ToDocuments (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginMapper (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToDocument_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToDocument_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToEntity_nil (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToEntity_valid (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToEntity_with_deleted_at (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToEntities (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper/ToDocuments (0.00s)
PASS internal/domain/dao/mongo/mapper.TestPluginExtensionMapper (0.00s)
PASS internal/domain/entity.TestRefreshToken_EdgeCases (0.00s)
coverage: 57.1% of statements
coverage: 89.0% of statements
PASS internal/domain/repository/impl.TestUserRepository/Create (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/GetByID (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/GetByUsername (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/GetByEmail (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/GetByUsernameOrEmail (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/Update (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/Delete (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/List (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/ExistsByUsername (0.00s)
PASS internal/domain/repository/impl.TestUserRepository/ExistsByEmail (0.00s)
PASS internal/domain/repository/impl.TestUserRepository (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository/Create (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository/GetByToken (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository/RevokeByToken (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository/RevokeAllByUserID (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository/DeleteExpired (0.00s)
PASS internal/domain/repository/impl.TestRefreshTokenRepository (0.00s)
PASS internal/domain/dao/gorm.TestUserDAO_Create (0.01s)
PASS internal/domain/repository/impl.TestPluginRepository/Create (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/GetByID (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/GetByKey (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/Update (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/Delete (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/DeleteByKey (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/List (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/ListByState (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/ListEnabled (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/ExistsByKey (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository/UpdateState (0.00s)
PASS internal/domain/repository/impl.TestPluginRepository (0.00s)
PASS internal/domain/repository/impl.TestPluginExtensionRepository/Create (0.00s)
PASS internal/domain/repository/impl.TestPluginExtensionRepository/GetByPluginID (0.00s)
PASS internal/domain/repository/impl.TestPluginExtensionRepository/DeleteByPluginID (0.00s)
PASS internal/domain/repository/impl.TestPluginExtensionRepository (0.00s)
coverage: 100.0% of statements
PASS internal/domain/dao/gorm.TestUserDAO_FindByID (0.01s)
PASS internal/domain/service.TestNewAuthService (0.00s)
PASS internal/domain/dao/gorm.TestUserDAO_FindByUsername (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_FindByEmail (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_FindByUsernameOrEmail (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_Update (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_Delete (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_FindAll (0.02s)
PASS internal/domain/dao/gorm.TestUserDAO_Count (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_ExistsByUsername (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_ExistsByEmail (0.01s)
PASS internal/domain/dao/gorm.TestUserDAO_ExistsBy (0.01s)
PASS internal/domain/dao/gorm.TestBaseGormDAO_Helpers (0.01s)
PASS internal/domain/dao/gorm.TestRefreshTokenDAO_Operations (0.01s)
PASS internal/domain/dao/gorm.TestPluginDAO_Operations (0.02s)
PASS internal/domain/dao/gorm.TestPluginExtensionDAO_Operations (0.01s)
coverage: 83.3% of statements
	github.com/jrjohn/arcana-cloud-go/internal/grpc/client		coverage: 0.0% of statements
EMPTY internal/grpc/client (coverage: 0.0% of statements)
PASS internal/dto/response.TestNewSuccess (0.00s)
PASS internal/dto/response.TestNewSuccessWithData (0.00s)
PASS internal/dto/response.TestNewError (0.00s)
PASS internal/dto/response.TestNewErrorWithDetails (0.00s)
PASS internal/dto/response.TestApiResponse_GenericTypes (0.00s)
PASS internal/dto/response.TestPageInfo_Struct (0.00s)
PASS internal/dto/response.TestNewPagedResponse/first_page (0.00s)
PASS internal/dto/response.TestNewPagedResponse/middle_page (0.00s)
PASS internal/dto/response.TestNewPagedResponse/last_page (0.00s)
PASS internal/dto/response.TestNewPagedResponse/single_page (0.00s)
PASS internal/dto/response.TestNewPagedResponse/empty_result (0.00s)
PASS internal/dto/response.TestNewPagedResponse/exact_page_boundary (0.00s)
PASS internal/dto/response.TestNewPagedResponse (0.00s)
PASS internal/dto/response.TestPagedResponse_GenericTypes (0.00s)
PASS internal/dto/response.TestApiResponse_Timestamp (0.00s)
PASS internal/dto/response.TestApiResponse_Struct (0.00s)
PASS internal/dto/response.TestPagedResponse_Struct (0.00s)
coverage: 100.0% of statements
PASS internal/domain/dao/mongo/document (coverage: 100.0% of statements)
PASS internal/domain/entity (coverage: 57.1% of statements)
PASS internal/domain/dao/mongo/mapper (coverage: 89.0% of statements)
PASS internal/domain/repository/impl (coverage: 100.0% of statements)
PASS internal/domain/dao/gorm (coverage: 83.3% of statements)
PASS internal/dto/response (coverage: 100.0% of statements)
PASS internal/jobs.TestPriority_String/Low (0.00s)
PASS internal/jobs.TestPriority_String/Normal (0.00s)
PASS internal/jobs.TestPriority_String/High (0.00s)
PASS internal/jobs.TestPriority_String/Critical (0.00s)
PASS internal/jobs.TestPriority_String/Unknown (0.00s)
PASS internal/jobs.TestPriority_String (0.00s)
PASS internal/jobs.TestPriority_QueueName/Low (0.00s)
PASS internal/jobs.TestPriority_QueueName/Normal (0.00s)
PASS internal/jobs.TestPriority_QueueName/High (0.00s)
PASS internal/jobs.TestPriority_QueueName/Critical (0.00s)
PASS internal/jobs.TestPriority_QueueName (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Pending (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Running (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Completed (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Failed (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Retrying (0.00s)
PASS internal/jobs.TestJobStatus_Constants/Dead (0.00s)
PASS internal/jobs.TestJobStatus_Constants (0.00s)
PASS internal/jobs.TestRetryStrategy_Constants/Exponential (0.00s)
PASS internal/jobs.TestRetryStrategy_Constants/Linear (0.00s)
PASS internal/jobs.TestRetryStrategy_Constants/Fixed (0.00s)
PASS internal/jobs.TestRetryStrategy_Constants (0.00s)
PASS internal/jobs.TestDefaultRetryPolicy (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Exponential_Attempt1 (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Exponential_Attempt2 (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Exponential_Attempt3 (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Exponential_CappedAtMax (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Linear_Attempt1 (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Linear_Attempt3 (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Fixed_AnyAttempt (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay/Unknown_DefaultsToInitial (0.00s)
PASS internal/jobs.TestRetryPolicy_CalculateDelay (0.00s)
PASS internal/jobs.TestNewJobPayload (0.00s)
PASS internal/jobs.TestNewJobPayload_WithOptions (0.00s)
PASS internal/jobs.TestWithPriority/low (0.00s)
PASS internal/jobs.TestWithPriority/normal (0.00s)
PASS internal/jobs.TestWithPriority/high (0.00s)
PASS internal/jobs.TestWithPriority/critical (0.00s)
PASS internal/jobs.TestWithPriority (0.00s)
PASS internal/jobs.TestWithRetryPolicy (0.00s)
PASS internal/jobs.TestWithTimeout (0.00s)
PASS internal/jobs.TestWithScheduledAt (0.00s)
PASS internal/jobs.TestWithDelay (0.00s)
PASS internal/jobs.TestWithCorrelationID (0.00s)
PASS internal/jobs.TestWithUniqueKey (0.00s)
PASS internal/jobs.TestWithTags (0.00s)
PASS internal/jobs.TestNewJobPayload_InvalidPayload (0.00s)
PASS internal/jobs.TestJobPayload_Serialization (0.00s)
PASS internal/jobs.TestJobResult (0.00s)
PASS internal/jobs.TestJobResult_WithError (0.00s)
PASS internal/jobs.TestNewMetrics (0.00s)
PASS internal/jobs.TestMetrics_RecordJobEnqueued (0.00s)
PASS internal/jobs.TestMetrics_RecordJobStarted (0.00s)
PASS internal/jobs.TestMetrics_RecordJobCompleted (0.00s)
PASS internal/jobs.TestMetrics_RecordJobFailed_WithRetry (0.00s)
PASS internal/jobs.TestMetrics_RecordJobFailed_NoRetry (0.00s)
PASS internal/jobs.TestMetrics_RecordJobDead (0.00s)
PASS internal/jobs.TestMetrics_PrometheusHandler (0.00s)
PASS internal/jobs.TestMetrics_PrometheusHandler_NoDurations (0.00s)
PASS internal/jobs.TestMetrics_GetHealthCheck_Healthy (0.00s)
PASS internal/jobs.TestMetrics_GetHealthCheck_Degraded (0.00s)
PASS internal/jobs.TestMetrics_GetHealthCheck_Boundary (0.00s)
PASS internal/jobs.TestHealthCheck_Struct (0.00s)
PASS internal/jobs.TestGlobalMetrics (0.00s)
PASS internal/jobs.TestMetrics_ConcurrentAccess (0.00s)
PASS internal/jobs/handler.TestNewRegistry (0.01s)
PASS internal/jobs/handler.TestRegistry_Register_SimplePayload (0.01s)
PASS internal/jobs.TestNewJobService (0.01s)
PASS internal/jobs/lock.TestDefaultLockManagerConfig (0.00s)
PASS internal/jobs.TestJobService_Enqueue (0.01s)
PASS internal/jobs/handler.TestRegistry_Register_MultipleHandlers (0.01s)
PASS internal/jobs.TestJobService_Enqueue_WithOptions (0.00s)
PASS internal/jobs/lock.TestNewLockManager (0.00s)
PASS internal/jobs/handler.TestRegistry_ListHandlers (0.01s)
PASS internal/jobs/handler.TestEmailJobPayload (0.00s)
PASS internal/jobs/handler.TestWebhookJobPayload (0.00s)
PASS internal/jobs/handler.TestCleanupJobPayload (0.00s)
PASS internal/jobs/handler.TestNotificationJobPayload (0.00s)
PASS internal/jobs/handler.TestReportJobPayload (0.00s)
PASS internal/jobs/handler.TestSyncJobPayload (0.00s)
PASS internal/jobs/lock.TestLockManager_GetWorkerID (0.00s)
PASS internal/jobs.TestJobService_EnqueueAt (0.01s)
PASS internal/jobs/handler.TestHandlerExecution (0.01s)
PASS internal/jobs/lock.TestLockManager_AcquireLock_Success (0.01s)
PASS internal/jobs/handler.TestHandlerWithError (0.01s)
PASS internal/jobs/lock.TestLockManager_AcquireLock_AlreadyLocked (0.01s)
PASS internal/jobs/lock.TestLockManager_AcquireLock_DifferentJobs (0.01s)
PASS internal/jobs/handler.TestHandlerWithContext (0.01s)
PASS internal/jobs/handler.TestPayloadSerialization_Empty (0.00s)
=== RUN   TestJobService_EnqueueIn
--- FAIL: TestJobService_EnqueueIn (0.01s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x5b0948]

goroutine 338 [running]:
testing.tRunner.func1.2({0x627420, 0xac8e00})
	/usr/local/go/src/testing/testing.go:1632 +0x2c4
testing.tRunner.func1()
	/usr/local/go/src/testing/testing.go:1635 +0x47c
panic({0x627420?, 0xac8e00?})
	/usr/local/go/src/runtime/panic.go:791 +0x124
github.com/jrjohn/arcana-cloud-go/internal/jobs_test.TestJobService_EnqueueIn(0xc000400340)
	/app/internal/jobs/job_service_test.go:118 +0x138
testing.tRunner(0xc000400340, 0x710308)
	/usr/local/go/src/testing/testing.go:1690 +0x188
created by testing.(*T).Run in goroutine 1
	/usr/local/go/src/testing/testing.go:1743 +0x5e4
FAIL internal/jobs.TestJobService_EnqueueIn (0.01s)
FAIL internal/jobs
PASS internal/jobs/lock.TestLockManager_ReleaseLock (0.02s)
PASS internal/jobs/handler.TestRegistry_ConcurrentRegistration (0.02s)
coverage: 77.8% of statements
PASS internal/jobs/lock.TestLockManager_ReleaseLock_Nil (0.01s)
PASS internal/jobs/lock.TestLockManager_ReleaseLock_NotHeld (0.01s)
PASS internal/jobs/lock.TestLockManager_CheckIdempotency_NotExists (0.00s)
PASS internal/jobs/lock.TestLockManager_CheckIdempotency_EmptyKey (0.00s)
PASS internal/jobs/lock.TestLockManager_MarkCompleted (0.00s)
PASS internal/jobs/lock.TestLockManager_MarkCompleted_EmptyKey (0.00s)
PASS internal/jobs/lock.TestLockManager_GetRunningJobs (0.00s)
PASS internal/jobs/lock.TestLockManager_GetWorkerJobs (0.01s)
PASS internal/jobs/lock.TestLockManager_CleanupStaleJobs (0.00s)
PASS internal/jobs/lock.TestLockManager_ReleaseAllLocks (0.01s)
PASS internal/jobs/lock.TestLockManager_ConcurrentAcquire (0.04s)
# github.com/jrjohn/arcana-cloud-go/internal/plugin/manager.test
/usr/local/go/pkg/tool/linux_arm64/link: running gcc failed: exit status 1
/usr/bin/gcc -s -Wl,-z,now -Wl,-z,nocopyreloc -fuse-ld=gold -o $WORK/b640/manager.test -rdynamic /tmp/go-link-177448627/go.o /tmp/go-link-177448627/000000.o /tmp/go-link-177448627/000001.o /tmp/go-link-177448627/000002.o /tmp/go-link-177448627/000003.o /tmp/go-link-177448627/000004.o /tmp/go-link-177448627/000005.o /tmp/go-link-177448627/000006.o /tmp/go-link-177448627/000007.o /tmp/go-link-177448627/000008.o /tmp/go-link-177448627/000009.o /tmp/go-link-177448627/000010.o /tmp/go-link-177448627/000011.o /tmp/go-link-177448627/000012.o /tmp/go-link-177448627/000013.o /tmp/go-link-177448627/000014.o /tmp/go-link-177448627/000015.o /tmp/go-link-177448627/000016.o /tmp/go-link-177448627/000017.o /tmp/go-link-177448627/000018.o /tmp/go-link-177448627/000019.o /tmp/go-link-177448627/000020.o /tmp/go-link-177448627/000021.o /tmp/go-link-177448627/000022.o /tmp/go-link-177448627/000023.o /tmp/go-link-177448627/000024.o -O2 -g -ldl -O2 -g -lpthread -O2 -g -lresolv -O2 -g
collect2: fatal error: cannot find 'ld'
compilation terminated.

PASS internal/jobs/queue.TestNewRedisQueue (0.01s)
PASS internal/jobs/scheduler.TestDefaultSchedulerConfig (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue (0.01s)
PASS internal/jobs/scheduler.TestNewScheduler (0.01s)
FAIL internal/plugin/manager
PASS internal/jobs/queue.TestRedisQueue_Enqueue_WithPriority/low (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue_WithPriority/normal (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue_WithPriority/high (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue_WithPriority/critical (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue_WithPriority (0.01s)
PASS internal/jobs/scheduler.TestScheduler_RegisterJob (0.00s)
PASS internal/jobs/scheduler.TestScheduler_RegisterJob_Duplicate (0.01s)
PASS internal/jobs/queue.TestRedisQueue_Enqueue_Scheduled (0.01s)
PASS internal/jobs/scheduler.TestScheduler_RegisterJob_InvalidCron (0.01s)
PASS internal/plugin/api.TestPluginType_Constants/REST_ENDPOINT (0.00s)
PASS internal/plugin/api.TestPluginType_Constants/SERVICE (0.00s)
PASS internal/plugin/api.TestPluginType_Constants/EVENT_LISTENER (0.00s)
PASS internal/plugin/api.TestPluginType_Constants/SCHEDULED_JOB (0.00s)
PASS internal/plugin/api.TestPluginType_Constants/SSR_VIEW (0.00s)
PASS internal/plugin/api.TestPluginType_Constants/MIDDLEWARE (0.00s)
PASS internal/plugin/api.TestPluginType_Constants (0.00s)
PASS internal/plugin/api.TestPluginInfo_Struct (0.00s)
PASS internal/plugin/api.TestHealthStatus_Struct/healthy_status (0.00s)
PASS internal/plugin/api.TestHealthStatus_Struct/unhealthy_status (0.00s)
PASS internal/plugin/api.TestHealthStatus_Struct/degraded_status (0.00s)
PASS internal/plugin/api.TestHealthStatus_Struct (0.00s)
PASS internal/plugin/api.TestRoute_Struct (0.00s)
PASS internal/plugin/api.TestEvent_Struct (0.00s)
PASS internal/plugin/api.TestJob_Struct (0.00s)
PASS internal/plugin/api.TestSSRComponent_Struct (0.00s)
PASS internal/plugin/api.TestMockPlugin_Interface (0.00s)
PASS internal/plugin/api.TestMockRESTPlugin_Interface (0.00s)
PASS internal/plugin/api.TestMockEventPlugin_Interface (0.00s)
PASS internal/plugin/api.TestMockMiddlewarePlugin_Interface (0.00s)
coverage: [no statements]
PASS internal/jobs/queue.TestRedisQueue_Enqueue_UniqueKey (0.01s)
PASS internal/jobs/worker.TestDefaultWorkerPoolConfig (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/EveryMinute (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/EveryFiveMinutes (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/EveryHour (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/DailyMidnight (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/WeeklyMonday (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/MonthlyFirst (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions/Custom (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ValidCronExpressions (0.01s)
=== RUN   TestRedisQueue_Dequeue
    redis_queue_test.go:135: Dequeue() error = queue is empty
--- FAIL: TestRedisQueue_Dequeue (0.01s)
FAIL internal/jobs/queue.TestRedisQueue_Dequeue (0.01s)
PASS internal/jobs/worker.TestNewWorkerPool (0.01s)
PASS internal/jobs/worker.TestWorkerPool_SetLockManager (0.01s)
PASS internal/jobs/worker.TestWorkerPool_RegisterHandler (0.01s)
=== RUN   TestRedisQueue_Dequeue_PriorityOrder
    redis_queue_test.go:171: Dequeue() 2 error = queue is empty
--- FAIL: TestRedisQueue_Dequeue_PriorityOrder (0.02s)
FAIL internal/jobs/queue.TestRedisQueue_Dequeue_PriorityOrder (0.02s)
PASS internal/jobs/queue.TestRedisQueue_Dequeue_Empty (0.01s)
PASS internal/jobs/worker.TestWorkerPool_StartStop (0.01s)
PASS internal/middleware.TestRequestID/generates_new_request_ID (0.00s)
PASS internal/middleware.TestRequestID/uses_provided_request_ID (0.00s)
PASS internal/middleware.TestRequestID (0.00s)
PASS internal/middleware.TestGetRequestID/request_ID_exists (0.00s)
PASS internal/middleware.TestGetRequestID/request_ID_not_exists (0.00s)
PASS internal/middleware.TestGetRequestID/wrong_type (0.00s)
PASS internal/middleware.TestGetRequestID (0.00s)
PASS internal/middleware.TestRequestIDConstants (0.00s)
PASS internal/middleware.TestDefaultCORSConfig (0.00s)
PASS internal/jobs/queue.TestRedisQueue_GetJob (0.01s)
PASS internal/middleware.TestCORS/regular_request (0.00s)
PASS internal/middleware.TestCORS/OPTIONS_preflight (0.00s)
PASS internal/middleware.TestCORS/no_origin_header (0.00s)
PASS internal/middleware.TestCORS (0.00s)
PASS internal/jobs/queue.TestRedisQueue_GetJob_NotFound (0.00s)
PASS internal/middleware.TestCORS_SpecificOrigins/allowed_origin (0.00s)
PASS internal/middleware.TestCORS_SpecificOrigins/disallowed_origin (0.00s)
PASS internal/middleware.TestCORS_SpecificOrigins (0.00s)
PASS internal/middleware.TestLogger (0.00s)
PASS internal/jobs/worker.TestWorkerPool_StartTwice (0.01s)
PASS internal/middleware.TestLogger_StatusCodes/success (0.00s)
PASS internal/middleware.TestLogger_StatusCodes/client_error (0.00s)
PASS internal/middleware.TestLogger_StatusCodes/not_found (0.00s)
PASS internal/middleware.TestLogger_StatusCodes/server_error (0.00s)
PASS internal/middleware.TestLogger_StatusCodes (0.00s)
PASS internal/middleware.TestRecovery/recovers_from_panic (0.00s)
PASS internal/middleware.TestRecovery/normal_request (0.00s)
PASS internal/middleware.TestRecovery (0.00s)
PASS internal/jobs/queue.TestRedisQueue_UpdateJob (0.01s)
PASS internal/jobs/worker.TestWorkerPool_StopNotRunning (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate/valid_token (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate/missing_auth_header (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate/invalid_format (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate/invalid_token (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate/case_insensitive_bearer (0.00s)
PASS internal/middleware.TestAuthMiddleware_Authenticate (0.00s)
PASS internal/middleware.TestAuthMiddleware_OptionalAuth/with_valid_token (0.00s)
PASS internal/middleware.TestAuthMiddleware_OptionalAuth/without_token (0.00s)
PASS internal/middleware.TestAuthMiddleware_OptionalAuth/with_invalid_token_format (0.00s)
PASS internal/middleware.TestAuthMiddleware_OptionalAuth (0.00s)
PASS internal/middleware.TestAuthMiddleware_RequireRole/admin_user (0.00s)
PASS internal/middleware.TestAuthMiddleware_RequireRole/non-admin_user (0.00s)
PASS internal/middleware.TestAuthMiddleware_RequireRole (0.00s)
PASS internal/middleware.TestAuthMiddleware_RequireAdmin/admin_access (0.00s)
PASS internal/middleware.TestAuthMiddleware_RequireAdmin (0.00s)
PASS internal/middleware.TestJoinStrings/empty (0.00s)
PASS internal/middleware.TestJoinStrings/single (0.00s)
PASS internal/middleware.TestJoinStrings/multiple (0.00s)
PASS internal/middleware.TestJoinStrings (0.00s)
coverage: 95.5% of statements
PASS internal/jobs/queue.TestRedisQueue_Complete (0.01s)
PASS internal/jobs/queue.TestRedisQueue_Fail_WithRetry (0.01s)
PASS internal/jobs/queue.TestRedisQueue_Fail_MoveToDLQ (0.01s)
=== RUN   TestRedisQueue_ProcessScheduled
    redis_queue_test.go:361: Dequeue() error = queue is empty
--- FAIL: TestRedisQueue_ProcessScheduled (0.03s)
FAIL internal/jobs/queue.TestRedisQueue_ProcessScheduled (0.03s)
PASS internal/jobs/queue.TestRedisQueue_ProcessScheduled_FutureJob (0.01s)
PASS internal/jobs/queue.TestRedisQueue_GetDLQJobs (0.02s)
PASS internal/jobs/queue.TestRedisQueue_RetryDLQJob (0.01s)
PASS internal/jobs/queue.TestRedisQueue_DeleteJob (0.01s)
=== RUN   TestRedisQueue_RequeueJob
    redis_queue_test.go:483: Dequeue after requeue error = queue is empty
--- FAIL: TestRedisQueue_RequeueJob (0.01s)
FAIL internal/jobs/queue.TestRedisQueue_RequeueJob (0.01s)
PASS internal/jobs/queue.TestRedisQueue_GetStats (0.02s)
PASS internal/jobs/queue.TestRedisQueue_Errors/ErrJobNotFound (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Errors/ErrDuplicateJob (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Errors/ErrQueueEmpty (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Errors/ErrJobAlreadyTaken (0.00s)
PASS internal/jobs/queue.TestRedisQueue_Errors (0.00s)
coverage: 80.5% of statements
FAIL internal/jobs/queue (coverage: 80.5% of statements)
PASS internal/jobs/scheduler.TestScheduler_StartStop (0.21s)
PASS internal/jobs/scheduler.TestScheduler_StartTwice (0.01s)
PASS internal/jobs/scheduler.TestScheduler_StopNotRunning (0.00s)
PASS internal/jobs/handler (coverage: 77.8% of statements)
	github.com/jrjohn/arcana-cloud-go/internal/testutil		coverage: 0.0% of statements
	github.com/jrjohn/arcana-cloud-go/internal/testutil/mocks		coverage: 0.0% of statements
EMPTY internal/testutil (coverage: 0.0% of statements)
EMPTY internal/testutil/mocks (coverage: 0.0% of statements)
PASS internal/security.TestNewJWTProvider (0.00s)
PASS internal/security.TestJWTProvider_GenerateAccessToken (0.00s)
PASS internal/security.TestJWTProvider_GenerateRefreshToken (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken/valid_token (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken/invalid_token_format (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken/empty_token (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken/wrong_signature (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken (0.00s)
PASS internal/security.TestJWTProvider_ValidateAccessToken_Expired (0.00s)
PASS internal/security.TestJWTProvider_ValidateRefreshToken (0.00s)
PASS internal/security.TestJWTProvider_ValidateRefreshToken_Invalid/invalid_token (0.00s)
PASS internal/security.TestJWTProvider_ValidateRefreshToken_Invalid/empty_token (0.00s)
PASS internal/security.TestJWTProvider_ValidateRefreshToken_Invalid (0.00s)
PASS internal/security.TestJWTProvider_ValidateRefreshToken_Expired (0.00s)
PASS internal/security.TestJWTProvider_GetAccessTokenDuration (0.00s)
PASS internal/security.TestUserClaims_Struct (0.00s)
PASS internal/security.TestErrorConstants (0.00s)
PASS internal/security.TestJWTProvider_DifferentRoles/USER (0.00s)
PASS internal/security.TestJWTProvider_DifferentRoles/ADMIN (0.00s)
PASS internal/security.TestJWTProvider_DifferentRoles (0.00s)
PASS internal/security.TestNewPasswordHasher (0.00s)
PASS internal/jobs/scheduler.TestScheduler_LeaderElection (0.31s)
PASS internal/jobs/scheduler.TestScheduler_IsLeader_NotStarted (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ListJobs (0.00s)
PASS internal/jobs/scheduler.TestScheduler_GetNextRun (0.00s)
PASS internal/jobs/scheduler.TestScheduler_GetNextRun_NotFound (0.00s)
PASS internal/jobs/scheduler.TestScheduler_SingletonJob (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow/*_*_*_*_* (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow/0_*_*_*_* (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow/0_0_*_*_* (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow/0_0_*_*_1 (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow/0_0_1_*_* (0.00s)
PASS internal/jobs/scheduler.TestScheduler_ExecutionWindow (0.00s)
PASS internal/jobs/scheduler.TestScheduler_GetRecentExecutions (0.00s)
PASS internal/jobs/scheduler.TestScheduledJob_Struct (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/EveryMinute (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/EveryFiveMinutes (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/EveryHour (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/DailyMidnight (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/WeeklyMonday (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants/MonthlyFirst (0.00s)
PASS internal/jobs/scheduler.TestCronExpressionConstants (0.00s)
coverage: 54.1% of statements
PASS pkg/errors.TestAppError_Error/error_without_wrapped_error (0.00s)
PASS pkg/errors.TestAppError_Error/error_with_wrapped_error (0.00s)
PASS pkg/errors.TestAppError_Error (0.00s)
PASS pkg/errors.TestAppError_Unwrap (0.00s)
PASS pkg/errors.TestNew (0.00s)
PASS pkg/errors.TestWrap (0.00s)
PASS pkg/errors.TestAppError_WithMessage (0.00s)
PASS pkg/errors.TestAppError_WithError (0.00s)
PASS pkg/errors.TestIs/same_error (0.00s)
PASS pkg/errors.TestIs/wrapped_error_with_same_code (0.00s)
PASS pkg/errors.TestIs/different_error_codes (0.00s)
PASS pkg/errors.TestIs/non-AppError (0.00s)
PASS pkg/errors.TestIs/nil_error (0.00s)
PASS pkg/errors.TestIs/wrapped_in_fmt.Errorf (0.00s)
PASS pkg/errors.TestIs (0.00s)
PASS pkg/errors.TestGetStatus/NotFound_error (0.00s)
PASS pkg/errors.TestGetStatus/BadRequest_error (0.00s)
PASS pkg/errors.TestGetStatus/Unauthorized_error (0.00s)
PASS pkg/errors.TestGetStatus/Forbidden_error (0.00s)
PASS pkg/errors.TestGetStatus/Conflict_error (0.00s)
PASS pkg/errors.TestGetStatus/InternalError (0.00s)
PASS pkg/errors.TestGetStatus/ServiceUnavailable_error (0.00s)
PASS pkg/errors.TestGetStatus/wrapped_AppError (0.00s)
PASS pkg/errors.TestGetStatus/plain_error (0.00s)
PASS pkg/errors.TestGetStatus/nil_error (0.00s)
PASS pkg/errors.TestGetStatus (0.00s)
PASS pkg/errors.TestCommonErrors/ErrNotFound (0.00s)
PASS pkg/errors.TestCommonErrors/ErrBadRequest (0.00s)
PASS pkg/errors.TestCommonErrors/ErrUnauthorized (0.00s)
PASS pkg/errors.TestCommonErrors/ErrForbidden (0.00s)
PASS pkg/errors.TestCommonErrors/ErrConflict (0.00s)
PASS pkg/errors.TestCommonErrors/ErrInternalError (0.00s)
PASS pkg/errors.TestCommonErrors/ErrServiceUnavailable (0.00s)
PASS pkg/errors.TestCommonErrors (0.00s)
PASS pkg/errors.TestErrorCodes (0.00s)
PASS pkg/errors.TestAppError_ErrorsAs (0.00s)
coverage: 100.0% of statements
=== RUN   TestLockManager_HeartbeatExtendsLock
    distributed_lock_test.go:365: Lock should still be held due to heartbeat
--- FAIL: TestLockManager_HeartbeatExtendsLock (1.52s)
FAIL internal/jobs/lock.TestLockManager_HeartbeatExtendsLock (1.52s)
PASS internal/jobs/lock.TestErrors/ErrLockNotAcquired (0.00s)
PASS internal/jobs/lock.TestErrors/ErrLockNotHeld (0.00s)
PASS internal/jobs/lock.TestErrors/ErrJobAlreadyDone (0.00s)
PASS internal/jobs/lock.TestErrors (0.00s)
coverage: 83.2% of statements
FAIL internal/jobs/lock (coverage: 83.2% of statements)
PASS internal/plugin/api
PASS internal/middleware (coverage: 95.5% of statements)
PASS pkg/logger.TestNew/development_config (0.00s)
PASS pkg/logger.TestNew/production_config (0.00s)
PASS pkg/logger.TestNew/invalid_level_falls_back_to_info (0.00s)
PASS pkg/logger.TestNew/error_level (0.00s)
PASS pkg/logger.TestNew/warn_level (0.00s)
PASS pkg/logger.TestNew/empty_encoding_uses_default (0.00s)
PASS pkg/logger.TestNew (0.01s)
PASS pkg/logger.TestNew_LogLevels/debug (0.00s)
PASS pkg/logger.TestNew_LogLevels/info (0.00s)
PASS pkg/logger.TestNew_LogLevels/warn (0.00s)
PASS pkg/logger.TestNew_LogLevels/error (0.00s)
PASS pkg/logger.TestNew_LogLevels/dpanic (0.00s)
PASS pkg/logger.TestNew_LogLevels/panic (0.00s)
PASS pkg/logger.TestNew_LogLevels/fatal (0.00s)
PASS pkg/logger.TestNew_LogLevels (0.00s)
PASS pkg/logger.TestDefault/development_mode (0.00s)
PASS pkg/logger.TestDefault/production_mode (0.00s)
PASS pkg/logger.TestDefault/empty_env_vars (0.00s)
PASS pkg/logger.TestDefault (0.00s)
PASS pkg/logger.TestWithContext (0.00s)
PASS pkg/logger.TestConfig_Struct (0.00s)
PASS pkg/logger.TestNew_DevelopmentVsProduction (0.00s)
PASS pkg/logger.TestLoggerIntegration (0.00s)
PASS pkg/logger.TestWithContext_MultipleFields (0.00s)
PASS pkg/logger.TestWithContext_EmptyFields (0.00s)
PASS pkg/logger.TestZapCoreLevelParsing (0.00s)
coverage: 94.7% of statements
PASS internal/jobs/scheduler (coverage: 54.1% of statements)
PASS pkg/errors (coverage: 100.0% of statements)
PASS pkg/logger (coverage: 94.7% of statements)
PASS internal/domain/service.TestAuthService_Register_Success (5.90s)
PASS internal/domain/service.TestAuthService_Register_UsernameExists (0.00s)
PASS internal/domain/service.TestAuthService_Register_EmailExists (0.00s)
PASS internal/domain/service.TestAuthService_Register_UsernameCheckError (0.00s)
PASS internal/domain/service.TestAuthService_Register_EmailCheckError (0.00s)
PASS internal/domain/service.TestAuthService_Register_CreateError (5.31s)
=== RUN   TestWorkerPool_ProcessJob
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Lock manager configured	{"worker_id": "aeced911-f817-43f2-8eb8-fad731812b8c", "locking_enabled": true, "idempotency_enabled": true}
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Registered job handler	{"type": "process-test"}
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Starting worker pool	{"concurrency": 2, "poll_interval": "50ms", "locking_enabled": true, "idempotency_enabled": true}
    logger.go:146: 2026-01-03T07:06:09.307Z	DEBUG	Worker started	{"worker_id": 0}
    logger.go:146: 2026-01-03T07:06:09.308Z	DEBUG	Worker started	{"worker_id": 1}
    logger.go:146: 2026-01-03T07:06:09.361Z	INFO	Processing job	{"worker_id": 0, "job_id": "72c29ef3-4ee5-4aa0-96b1-fed5bd433791", "job_type": "scheduled-test", "attempt": 1}
    logger.go:146: 2026-01-03T07:06:09.362Z	ERROR	No handler registered for job type	{"worker_id": 0, "job_id": "72c29ef3-4ee5-4aa0-96b1-fed5bd433791", "job_type": "scheduled-test", "attempt": 1}
    logger.go:146: 2026-01-03T07:06:09.411Z	INFO	Processing job	{"worker_id": 1, "job_id": "caf22df1-5f74-473e-bee4-27bd2c9e8c07", "job_type": "requeue-test", "attempt": 2}
    logger.go:146: 2026-01-03T07:06:09.411Z	ERROR	No handler registered for job type	{"worker_id": 1, "job_id": "caf22df1-5f74-473e-bee4-27bd2c9e8c07", "job_type": "requeue-test", "attempt": 2}
    testutil.go:167: Timeout waiting for condition: Job should be processed
    logger.go:146: 2026-01-03T07:06:19.315Z	INFO	Stopping worker pool
    logger.go:146: 2026-01-03T07:06:19.315Z	INFO	Worker pool stopped gracefully
--- FAIL: TestWorkerPool_ProcessJob (10.01s)
FAIL internal/jobs/worker.TestWorkerPool_ProcessJob (10.01s)
PASS internal/jobs/worker.TestWorkerPool_ProcessJobWithPayload (0.06s)
PASS internal/jobs/worker.TestWorkerPool_JobFailure (0.06s)
PASS internal/jobs/worker.TestWorkerPool_NoHandler (0.06s)
PASS internal/jobs/worker.TestWorkerPool_JobTimeout (0.17s)
PASS internal/jobs/worker.TestWorkerPool_IdempotencyCheck (0.07s)
PASS internal/jobs/worker.TestWorkerPool_Stats (0.16s)
PASS internal/jobs/worker.TestWorkerPool_GetRunningJobs (2.06s)
PASS internal/jobs/worker.TestWorkerPool_GetRunningJobs_NoLockManager (0.00s)
PASS internal/jobs/worker.TestWorkerPool_DisableLocking (0.07s)
PASS internal/jobs/worker.TestWorkerPool_DisableIdempotency (0.06s)
PASS internal/jobs/worker.TestWorkerPoolStats_Struct (0.00s)
coverage: 75.5% of statements
FAIL internal/jobs/worker (coverage: 75.5% of statements)
PASS internal/domain/service.TestAuthService_Register_RefreshTokenCreateError (5.24s)
PASS internal/domain/service.TestAuthService_Login_Success (10.26s)
PASS internal/security.TestPasswordHasher_Hash/simple_password (5.66s)
PASS internal/security.TestPasswordHasher_Hash/complex_password (5.14s)
PASS internal/security.TestPasswordHasher_Hash/empty_password (5.29s)
PASS internal/security.TestPasswordHasher_Hash/unicode_password (4.99s)
PASS internal/security.TestPasswordHasher_Hash/very_long_password (5.21s)
PASS internal/security.TestPasswordHasher_Hash (26.29s)
PASS internal/domain/service.TestAuthService_Login_ByEmail (10.58s)
PASS internal/domain/service.TestAuthService_Login_UserNotFound (0.00s)
PASS internal/security.TestPasswordHasher_Hash_UniqueSalts (15.70s)
PASS internal/domain/service.TestAuthService_Login_InvalidPassword (10.53s)
PASS internal/domain/service.TestAuthService_Login_UserInactive (5.17s)
PASS internal/domain/service.TestAuthService_Login_LookupError (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_Success (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_InvalidToken (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_TokenNotInDB (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_RevokedToken (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_UserNotFound (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_UserInactive (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_GetByTokenError (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_RevokeError (0.00s)
PASS internal/domain/service.TestAuthService_RefreshToken_GetUserError (0.00s)
PASS internal/domain/service.TestAuthService_Logout (0.00s)
PASS internal/domain/service.TestAuthService_Logout_Error (0.00s)
PASS internal/domain/service.TestAuthService_LogoutAll (0.00s)
PASS internal/domain/service.TestAuthService_LogoutAll_Error (0.00s)
PASS internal/domain/service.TestServiceErrors/ErrUserNotFound (0.00s)
PASS internal/domain/service.TestServiceErrors/ErrInvalidCredentials (0.00s)
PASS internal/domain/service.TestServiceErrors/ErrUserAlreadyExists (0.00s)
PASS internal/domain/service.TestServiceErrors/ErrInvalidToken (0.00s)
PASS internal/domain/service.TestServiceErrors/ErrUserInactive (0.00s)
PASS internal/domain/service.TestServiceErrors (0.00s)
PASS internal/domain/service.TestNewPluginService (0.00s)
PASS internal/domain/service.TestPluginService_Install_Success (0.00s)
PASS internal/domain/service.TestPluginService_Install_WithConfig (0.00s)
PASS internal/domain/service.TestPluginService_Install_AlreadyExists (0.00s)
PASS internal/domain/service.TestPluginService_Install_ExistsByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_Install_CreateError (0.00s)
PASS internal/domain/service.TestPluginService_InstallFromPath_Success (0.00s)
PASS internal/domain/service.TestPluginService_InstallFromPath_FileNotFound (0.00s)
PASS internal/domain/service.TestPluginService_GetByKey_Success (0.00s)
PASS internal/domain/service.TestPluginService_GetByKey_NotFound (0.00s)
PASS internal/domain/service.TestPluginService_GetByKey_GetByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_GetByKey_ExtensionsError (0.00s)
PASS internal/domain/service.TestPluginService_GetByKey_InvalidConfigJSON (0.00s)
PASS internal/domain/service.TestPluginService_List_Success (0.00s)
PASS internal/domain/service.TestPluginService_List_InvalidPage (0.00s)
PASS internal/domain/service.TestPluginService_List_InvalidSize (0.00s)
PASS internal/domain/service.TestPluginService_List_Error (0.00s)
PASS internal/domain/service.TestPluginService_Enable_Success (0.00s)
PASS internal/domain/service.TestPluginService_Enable_AlreadyEnabled (0.00s)
PASS internal/domain/service.TestPluginService_Enable_FromDisabled (0.00s)
PASS internal/domain/service.TestPluginService_Enable_InvalidState (0.00s)
PASS internal/domain/service.TestPluginService_Enable_NotFound (0.00s)
PASS internal/domain/service.TestPluginService_Enable_GetByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_Enable_UpdateStateError (0.00s)
PASS internal/domain/service.TestPluginService_Disable_Success (0.00s)
PASS internal/domain/service.TestPluginService_Disable_AlreadyDisabled (0.00s)
PASS internal/domain/service.TestPluginService_Disable_InvalidState (0.00s)
PASS internal/domain/service.TestPluginService_Disable_NotFound (0.00s)
PASS internal/domain/service.TestPluginService_Disable_GetByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_Disable_UpdateStateError (0.00s)
PASS internal/domain/service.TestPluginService_Uninstall_Success (0.00s)
PASS internal/domain/service.TestPluginService_Uninstall_NotFound (0.00s)
PASS internal/domain/service.TestPluginService_Uninstall_GetByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_Uninstall_ExtensionDeleteError (0.00s)
PASS internal/domain/service.TestPluginService_Uninstall_DeleteByKeyError (0.00s)
PASS internal/domain/service.TestPluginService_GetHealth_Success (0.00s)
PASS internal/domain/service.TestPluginService_GetHealth_Degraded (0.00s)
PASS internal/domain/service.TestPluginService_GetHealth_EnabledError (0.00s)
PASS internal/domain/service.TestPluginServiceErrors/ErrPluginNotFound (0.00s)
PASS internal/domain/service.TestPluginServiceErrors/ErrPluginAlreadyExists (0.00s)
PASS internal/domain/service.TestPluginServiceErrors/ErrPluginInvalidState (0.00s)
PASS internal/domain/service.TestPluginServiceErrors/ErrPluginLoadFailed (0.00s)
PASS internal/domain/service.TestPluginServiceErrors (0.00s)
PASS internal/domain/service.TestNewSSRService (0.00s)
PASS internal/domain/service.TestSSRService_RenderReact_Success (0.00s)
PASS internal/domain/service.TestSSRService_RenderReact_WithCache (0.00s)
PASS internal/domain/service.TestSSRService_RenderAngular_Success (0.00s)
PASS internal/domain/service.TestSSRService_RenderAngular_WithCache (0.00s)
PASS internal/domain/service.TestSSRService_GetStatus (0.00s)
PASS internal/domain/service.TestSSRService_GetStatus_NoCache (0.00s)
PASS internal/domain/service.TestSSRService_GetStatus_WithCacheEntries (0.00s)
PASS internal/domain/service.TestSSRService_ClearCache (0.00s)
PASS internal/domain/service.TestSSRService_CacheExpiration (0.02s)
PASS internal/domain/service.TestSSRService_Stats (0.00s)
PASS internal/domain/service.TestSSRService_RenderPlaceholder_NilProps (0.00s)
PASS internal/domain/service.TestSSRService_ConcurrentRenders (0.00s)
PASS internal/domain/service.TestSSRRenderResult_Fields (0.00s)
PASS internal/domain/service.TestSSRCacheEntry_Fields (0.00s)
PASS internal/domain/service.TestSSRStatus_Fields (0.00s)
PASS internal/domain/service.TestSSRServiceErrors/ErrSSREngineNotReady (0.00s)
PASS internal/domain/service.TestSSRServiceErrors/ErrSSRRenderFailed (0.00s)
PASS internal/domain/service.TestSSRServiceErrors/ErrComponentNotFound (0.00s)
PASS internal/domain/service.TestSSRServiceErrors (0.00s)
PASS internal/domain/service.TestToJSON/nil (0.00s)
PASS internal/domain/service.TestToJSON/empty_map (0.00s)
PASS internal/domain/service.TestToJSON/map_with_values (0.00s)
PASS internal/domain/service.TestToJSON (0.00s)
PASS internal/domain/service.TestNewUserService (0.00s)
PASS internal/domain/service.TestUserService_GetByID_Success (0.00s)
PASS internal/domain/service.TestUserService_GetByID_NotFound (0.00s)
PASS internal/domain/service.TestUserService_GetByID_Error (0.00s)
PASS internal/domain/service.TestUserService_GetByUsername_Success (0.00s)
PASS internal/domain/service.TestUserService_GetByUsername_NotFound (0.00s)
PASS internal/domain/service.TestUserService_GetByUsername_Error (0.00s)
PASS internal/domain/service.TestUserService_GetByEmail_Success (0.00s)
PASS internal/domain/service.TestUserService_GetByEmail_NotFound (0.00s)
PASS internal/domain/service.TestUserService_GetByEmail_Error (0.00s)
PASS internal/domain/service.TestUserService_List_Success (0.00s)
PASS internal/domain/service.TestUserService_List_InvalidPage (0.00s)
PASS internal/domain/service.TestUserService_List_InvalidSize (0.00s)
PASS internal/domain/service.TestUserService_List_Error (0.00s)
PASS internal/domain/service.TestUserService_Update_Success (0.00s)
PASS internal/domain/service.TestUserService_Update_EmailChange (0.00s)
PASS internal/domain/service.TestUserService_Update_EmailExists (0.00s)
PASS internal/domain/service.TestUserService_Update_UserNotFound (0.00s)
PASS internal/domain/service.TestUserService_Update_GetByIDError (0.00s)
PASS internal/domain/service.TestUserService_Update_EmailCheckError (0.00s)
PASS internal/domain/service.TestUserService_Update_UpdateError (0.00s)
PASS internal/domain/service.TestUserService_ChangePassword_Success (15.84s)
PASS internal/domain/service.TestUserService_ChangePassword_UserNotFound (0.00s)
PASS internal/domain/service.TestUserService_ChangePassword_WrongOldPassword (10.24s)
PASS internal/domain/service.TestUserService_ChangePassword_GetByIDError (0.00s)
PASS internal/domain/service.TestUserService_ChangePassword_UpdateError (15.44s)
PASS internal/domain/service.TestUserService_Delete_Success (0.00s)
PASS internal/domain/service.TestUserService_Delete_Error (0.00s)
PASS internal/domain/service.TestUserService_ExistsByUsername_True (0.00s)
PASS internal/domain/service.TestUserService_ExistsByUsername_False (0.00s)
PASS internal/domain/service.TestUserService_ExistsByUsername_Error (0.00s)
PASS internal/domain/service.TestUserService_ExistsByEmail_True (0.00s)
PASS internal/domain/service.TestUserService_ExistsByEmail_False (0.00s)
PASS internal/domain/service.TestUserService_ExistsByEmail_Error (0.00s)
coverage: 93.1% of statements
PASS internal/domain/service (coverage: 93.1% of statements)
PASS internal/security.TestPasswordHasher_Verify/correct_password (10.58s)
PASS internal/security.TestPasswordHasher_Verify/wrong_password (10.25s)
PASS internal/security.TestPasswordHasher_Verify/case_sensitive (10.49s)
PASS internal/security.TestPasswordHasher_Verify/empty_password_match (10.24s)
PASS internal/security.TestPasswordHasher_Verify/empty_password_no_match (9.94s)
PASS internal/security.TestPasswordHasher_Verify/unicode_password (8.53s)
PASS internal/security.TestPasswordHasher_Verify/unicode_password_mismatch (7.86s)
PASS internal/security.TestPasswordHasher_Verify (67.91s)
PASS internal/security.TestPasswordHasher_Verify_InvalidHash/invalid_hash_format (0.00s)
PASS internal/security.TestPasswordHasher_Verify_InvalidHash/empty_hash (0.00s)
PASS internal/security.TestPasswordHasher_Verify_InvalidHash/truncated_hash (0.00s)
PASS internal/security.TestPasswordHasher_Verify_InvalidHash (0.00s)
PASS internal/security.TestDefaultCost (0.00s)
PASS internal/security.TestPasswordHasher_HashFormat (4.12s)
PASS internal/security.TestPasswordHasher_CrossVerification (8.26s)
PASS internal/security.TestPasswordHasher_LongPassword (8.34s)
PASS internal/security.TestNewSecurityService (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUser/user_exists (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUser/user_not_exists (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUser/wrong_type_in_context (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUser (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUserID/claims_exist (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUserID/no_claims (0.00s)
PASS internal/security.TestSecurityService_GetCurrentUserID (0.00s)
PASS internal/security.TestSecurityService_GetCurrentClaims/claims_exist (0.00s)
PASS internal/security.TestSecurityService_GetCurrentClaims/claims_not_exist (0.00s)
PASS internal/security.TestSecurityService_GetCurrentClaims/wrong_type_in_context (0.00s)
PASS internal/security.TestSecurityService_GetCurrentClaims (0.00s)
PASS internal/security.TestSecurityService_SetCurrentUser (0.00s)
PASS internal/security.TestSecurityService_SetCurrentClaims (0.00s)
PASS internal/security.TestSecurityService_IsAuthenticated/authenticated (0.00s)
PASS internal/security.TestSecurityService_IsAuthenticated/not_authenticated (0.00s)
PASS internal/security.TestSecurityService_IsAuthenticated (0.00s)
PASS internal/security.TestSecurityService_HasRole/has_admin_role (0.00s)
PASS internal/security.TestSecurityService_HasRole/has_user_role (0.00s)
PASS internal/security.TestSecurityService_HasRole/user_checking_for_admin (0.00s)
PASS internal/security.TestSecurityService_HasRole/admin_checking_for_user (0.00s)
PASS internal/security.TestSecurityService_HasRole/no_claims (0.00s)
PASS internal/security.TestSecurityService_HasRole (0.00s)
PASS internal/security.TestSecurityService_IsAdmin/is_admin (0.00s)
PASS internal/security.TestSecurityService_IsAdmin/not_admin (0.00s)
PASS internal/security.TestSecurityService_IsAdmin/no_claims (0.00s)
PASS internal/security.TestSecurityService_IsAdmin (0.00s)
PASS internal/security.TestContextKeys (0.00s)
coverage: 94.1% of statements
PASS internal/security (coverage: 94.1% of statements)

=== Failed
=== FAIL: internal/di  (0.00s)
FAIL	github.com/jrjohn/arcana-cloud-go/internal/di [build failed]

=== FAIL: internal/jobs TestJobService_EnqueueIn (0.01s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x5b0948]

goroutine 338 [running]:
testing.tRunner.func1.2({0x627420, 0xac8e00})
	/usr/local/go/src/testing/testing.go:1632 +0x2c4
testing.tRunner.func1()
	/usr/local/go/src/testing/testing.go:1635 +0x47c
panic({0x627420?, 0xac8e00?})
	/usr/local/go/src/runtime/panic.go:791 +0x124
github.com/jrjohn/arcana-cloud-go/internal/jobs_test.TestJobService_EnqueueIn(0xc000400340)
	/app/internal/jobs/job_service_test.go:118 +0x138
testing.tRunner(0xc000400340, 0x710308)
	/usr/local/go/src/testing/testing.go:1690 +0x188
created by testing.(*T).Run in goroutine 1
	/usr/local/go/src/testing/testing.go:1743 +0x5e4

=== FAIL: internal/jobs/lock TestLockManager_HeartbeatExtendsLock (1.52s)
    distributed_lock_test.go:365: Lock should still be held due to heartbeat

=== FAIL: internal/jobs/queue TestRedisQueue_Dequeue (0.01s)
    redis_queue_test.go:135: Dequeue() error = queue is empty

=== FAIL: internal/jobs/queue TestRedisQueue_Dequeue_PriorityOrder (0.02s)
    redis_queue_test.go:171: Dequeue() 2 error = queue is empty

=== FAIL: internal/jobs/queue TestRedisQueue_ProcessScheduled (0.03s)
    redis_queue_test.go:361: Dequeue() error = queue is empty

=== FAIL: internal/jobs/queue TestRedisQueue_RequeueJob (0.01s)
    redis_queue_test.go:483: Dequeue after requeue error = queue is empty

=== FAIL: internal/jobs/worker TestWorkerPool_ProcessJob (10.01s)
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Lock manager configured	{"worker_id": "aeced911-f817-43f2-8eb8-fad731812b8c", "locking_enabled": true, "idempotency_enabled": true}
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Registered job handler	{"type": "process-test"}
    logger.go:146: 2026-01-03T07:06:09.307Z	INFO	Starting worker pool	{"concurrency": 2, "poll_interval": "50ms", "locking_enabled": true, "idempotency_enabled": true}
    logger.go:146: 2026-01-03T07:06:09.307Z	DEBUG	Worker started	{"worker_id": 0}
    logger.go:146: 2026-01-03T07:06:09.308Z	DEBUG	Worker started	{"worker_id": 1}
    logger.go:146: 2026-01-03T07:06:09.361Z	INFO	Processing job	{"worker_id": 0, "job_id": "72c29ef3-4ee5-4aa0-96b1-fed5bd433791", "job_type": "scheduled-test", "attempt": 1}
    logger.go:146: 2026-01-03T07:06:09.362Z	ERROR	No handler registered for job type	{"worker_id": 0, "job_id": "72c29ef3-4ee5-4aa0-96b1-fed5bd433791", "job_type": "scheduled-test", "attempt": 1}
    logger.go:146: 2026-01-03T07:06:09.411Z	INFO	Processing job	{"worker_id": 1, "job_id": "caf22df1-5f74-473e-bee4-27bd2c9e8c07", "job_type": "requeue-test", "attempt": 2}
    logger.go:146: 2026-01-03T07:06:09.411Z	ERROR	No handler registered for job type	{"worker_id": 1, "job_id": "caf22df1-5f74-473e-bee4-27bd2c9e8c07", "job_type": "requeue-test", "attempt": 2}
    testutil.go:167: Timeout waiting for condition: Job should be processed
    logger.go:146: 2026-01-03T07:06:19.315Z	INFO	Stopping worker pool
    logger.go:146: 2026-01-03T07:06:19.315Z	INFO	Worker pool stopped gracefully

=== FAIL: internal/plugin/manager  (0.00s)
FAIL	github.com/jrjohn/arcana-cloud-go/internal/plugin/manager [build failed]

=== Errors
/usr/local/go/pkg/tool/linux_arm64/link: running gcc failed: exit status 1
/usr/bin/gcc -s -Wl,-z,now -Wl,-z,nocopyreloc -fuse-ld=gold -o $WORK/b569/di.test -rdynamic /tmp/go-link-1414236909/go.o /tmp/go-link-1414236909/000000.o /tmp/go-link-1414236909/000001.o /tmp/go-link-1414236909/000002.o /tmp/go-link-1414236909/000003.o /tmp/go-link-1414236909/000004.o /tmp/go-link-1414236909/000005.o /tmp/go-link-1414236909/000006.o /tmp/go-link-1414236909/000007.o /tmp/go-link-1414236909/000008.o /tmp/go-link-1414236909/000009.o /tmp/go-link-1414236909/000010.o /tmp/go-link-1414236909/000011.o /tmp/go-link-1414236909/000012.o /tmp/go-link-1414236909/000013.o /tmp/go-link-1414236909/000014.o /tmp/go-link-1414236909/000015.o /tmp/go-link-1414236909/000016.o /tmp/go-link-1414236909/000017.o /tmp/go-link-1414236909/000018.o /tmp/go-link-1414236909/000019.o /tmp/go-link-1414236909/000020.o /tmp/go-link-1414236909/000021.o /tmp/go-link-1414236909/000022.o /tmp/go-link-1414236909/000023.o /tmp/go-link-1414236909/000024.o /tmp/go-link-1414236909/000025.o /tmp/go-link-1414236909/000026.o /tmp/go-link-1414236909/000027.o -O2 -g -lresolv -O2 -g -ldl -O2 -g -lpthread -O2 -g -O2 -g
collect2: fatal error: cannot find 'ld'
compilation terminated.

/usr/local/go/pkg/tool/linux_arm64/link: running gcc failed: exit status 1
/usr/bin/gcc -s -Wl,-z,now -Wl,-z,nocopyreloc -fuse-ld=gold -o $WORK/b640/manager.test -rdynamic /tmp/go-link-177448627/go.o /tmp/go-link-177448627/000000.o /tmp/go-link-177448627/000001.o /tmp/go-link-177448627/000002.o /tmp/go-link-177448627/000003.o /tmp/go-link-177448627/000004.o /tmp/go-link-177448627/000005.o /tmp/go-link-177448627/000006.o /tmp/go-link-177448627/000007.o /tmp/go-link-177448627/000008.o /tmp/go-link-177448627/000009.o /tmp/go-link-177448627/000010.o /tmp/go-link-177448627/000011.o /tmp/go-link-177448627/000012.o /tmp/go-link-177448627/000013.o /tmp/go-link-177448627/000014.o /tmp/go-link-177448627/000015.o /tmp/go-link-177448627/000016.o /tmp/go-link-177448627/000017.o /tmp/go-link-177448627/000018.o /tmp/go-link-177448627/000019.o /tmp/go-link-177448627/000020.o /tmp/go-link-177448627/000021.o /tmp/go-link-177448627/000022.o /tmp/go-link-177448627/000023.o /tmp/go-link-177448627/000024.o -O2 -g -ldl -O2 -g -lpthread -O2 -g -lresolv -O2 -g
collect2: fatal error: cannot find 'ld'
compilation terminated.


DONE 816 tests, 9 failures, 10 errors in 208.675s
